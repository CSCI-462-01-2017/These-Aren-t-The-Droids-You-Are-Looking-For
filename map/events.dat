This file describes location event triggers: they will execute some code
when the player is at a certain location.
Each trigger has the following field:
	- name is a unique name for the trigger. For non silent triggers such 
	as teleporters, this is this name that will be displayed on screen.
	- silent (1 by default) is a flag that tells the game not to display the
	trigger on screen when the player puts the mouse cursor over it
	- trigger at label indicates what map label the event trigger is located at
	- luacode contains the lua code to execute

*** START OF EVENT ACTION AND EVENT TRIGGER FILE *** 

** Start of Mission Event Section **

##############
## Level  0 ##
##############
* New event trigger *
Name=_"To Maintenance Tunnels"
Trigger at label="0to6"
Silent=0
<LuaCode> teleport("6from0") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"To Novice Arena"
Trigger at label="0to29"
Silent=0
<LuaCode> teleport("29from0") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"To Master Arena"
Trigger at label="0to30"
Silent=0
<LuaCode> teleport("30from0") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"Escort Tux N"
Trigger at label="N-enter-1"
Silent=1
<LuaCode>
	if (guard_follow_tux) then
		set_bot_state("follow_tux", "Town-TuxGuard")
	end
	if (North_greeting) then
		North_greeting = false
		set_rush_tux(0, "Town-NorthGateGuard")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Escort Tux N2"
Trigger at label="N-enter-2"
Silent=1
<LuaCode>
	if (guard_follow_tux) then
		set_bot_state("follow_tux", "Town-TuxGuard")
	end
	if (North_greeting) then
		North_greeting = false
		set_rush_tux(0, "Town-NorthGateGuard")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Escort Tux N3"
Trigger at label="N-enter-3"
Silent=1
<LuaCode>
	if (guard_follow_tux) then
		set_bot_state("follow_tux", "Town-TuxGuard")
	end
	if (North_greeting) then
		North_greeting = false
		set_rush_tux(0, "Town-NorthGateGuard")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Escort Tux N4"
Trigger at label="N-enter-4"
Silent=1
<LuaCode>
	if (guard_follow_tux) then
		set_bot_state("follow_tux", "Town-TuxGuard")
	end
	if (North_greeting) then
		North_greeting = false
		set_rush_tux(0, "Town-NorthGateGuard")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Escort Tux N-e1-inner"
Trigger at label="N-exit-1-inner"
Silent=1
<LuaCode>
	if (guard_follow_tux) then
		set_bot_state("patrol", "Town-TuxGuard")
	end
	if (not North_greeting) and
	   (not tux_has_joined_guard) then
		North_greeting = true
		set_rush_tux(1, "Town-NorthGateGuard")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Escort Tux N-e2-inner"
Trigger at label="N-exit-2-inner"
Silent=1
<LuaCode>
	if (guard_follow_tux) then
		set_bot_state("patrol", "Town-TuxGuard")
	end
	if (not North_greeting) and
	   (not tux_has_joined_guard) then
		North_greeting = true
		set_rush_tux(1, "Town-NorthGateGuard")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Escort Tux N-e3-inner"
Trigger at label="N-exit-3-inner"
Silent=1
<LuaCode>
	if (guard_follow_tux) then
		set_bot_state("patrol", "Town-TuxGuard")
	end
	if (not North_greeting) and
	   (not tux_has_joined_guard) then
		North_greeting = true
		set_rush_tux(1, "Town-NorthGateGuard")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Escort Tux N-e4-inner"
Trigger at label="N-exit-4-inner"
Silent=1
<LuaCode>
	if (guard_follow_tux) then
		set_bot_state("patrol", "Town-TuxGuard")
	end
	if (not North_greeting) and
	   (not tux_has_joined_guard) then
		North_greeting = true
		set_rush_tux(1, "Town-NorthGateGuard")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Escort Tux TR-exit-1"
Trigger at label="TeleporterRoom-exit-1"
Silent=1
<LuaCode>
	if (guard_follow_tux) then
		set_bot_state("follow_tux", "Town-TuxGuard")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Escort Tux TR-exit-2"
Trigger at label="TeleporterRoom-exit-2"
Silent=1
<LuaCode>
	if (guard_follow_tux) then
		set_bot_state("follow_tux", "Town-TuxGuard")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Escort Tux Teleport Out"
Trigger exiting level=0
<LuaCode>
	if (guard_follow_tux) then
		set_bot_state("patrol", "Town-TuxGuard")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Escort Tux N-e1-outer"
Trigger at label="N-exit-1-outer"
Silent=1
<LuaCode>
	set_rush_tux(0, "Town-TuxGuard")
	set_rush_tux(0, "Town-NorthGateGuard")
	if (North_greeting) then
		North_greeting = false
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Escort Tux N-e2-outer"
Trigger at label="N-exit-2-outer"
Silent=1
<LuaCode>
	set_rush_tux(0, "Town-TuxGuard")
	set_rush_tux(0, "Town-NorthGateGuard")
	if (North_greeting) then
		North_greeting = false
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Escort Tux N-e3-outer"
Trigger at label="N-exit-3-outer"
Silent=1
<LuaCode>
	set_rush_tux(0, "Town-TuxGuard")
	set_rush_tux(0, "Town-NorthGateGuard")
	if (North_greeting) then
		North_greeting = false
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Escort Tux N-e4-outer"
Trigger at label="N-exit-4-outer"
Silent=1
<LuaCode>
	set_rush_tux(0, "Town-TuxGuard")
	set_rush_tux(0, "Town-NorthGateGuard")
	if (North_greeting) then
		North_greeting = false
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Tania Escort W-1"
Trigger at label="W-enter-1"
Silent=1
<LuaCode>
	if (Tania_surface) and
	   (not done_quest("Tania's Escape")) and
	   (not Tania_stopped_by_Pendragon) then
		Tania_stopped_by_Pendragon = true
		start_chat("Pendragon")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Tania Escort W-2"
Trigger at label="W-enter-2"
Silent=1
<LuaCode>
	if (Tania_surface) and
	   (not done_quest("Tania's Escape")) and
	   (not Tania_stopped_by_Pendragon) then
		Tania_stopped_by_Pendragon = true
		start_chat("Pendragon")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Tania Escort W-3"
Trigger at label="W-enter-3"
Silent=1
<LuaCode>
	if (Tania_surface) and
	   (not done_quest("Tania's Escape")) and
	   (not Tania_stopped_by_Pendragon) then
		Tania_stopped_by_Pendragon = true
		start_chat("Pendragon")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"DocFront-inner-N"
Trigger at label="DocFront-inner-N"
Silent=1
<LuaCode>
	if (tux_hp_ratio() < 0.4) and
	   (not DocMoore_exam) then
		set_rush_tux(1, "DocMoore")
		DocMoore_exam = true
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"DocFront-inner-S"
Trigger at label="DocFront-inner-S"
Silent=1
<LuaCode>
	if (tux_hp_ratio() < 0.4) and
	   (not DocMoore_exam) then
		set_rush_tux(1, "DocMoore")
		DocMoore_exam = true
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"DocBack-inner-W"
Trigger at label="DocBack-inner-W"
Silent=1
<LuaCode>
	if (tux_hp_ratio() < 0.4) and
	   (not DocMoore_exam) then
		set_rush_tux(1, "DocMoore")
		DocMoore_exam = true
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"DocBack-inner-E"
Trigger at label="DocBack-inner-E"
Silent=1
<LuaCode>
	if (tux_hp_ratio() < 0.4) and
	   (not DocMoore_exam) then
		set_rush_tux(1, "DocMoore")
		DocMoore_exam = true
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"DocFront-out-N"
Trigger at label="DocFront-out-N"
Silent=1
<LuaCode>
	if (DocMoore_exam) then
		set_rush_tux(0, "DocMoore")
		DocMoore_exam = false
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"DocFront-out-S"
Trigger at label="DocFront-out-S"
Silent=1
<LuaCode>
	if (DocMoore_exam) then
		set_rush_tux(0, "DocMoore")
		DocMoore_exam = false
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"DocBack-out-W"
Trigger at label="DocBack-out-W"
Silent=1
<LuaCode>
	if (DocMoore_exam) then
		set_rush_tux(0, "DocMoore")
		DocMoore_exam = false
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"DocBack-out-E"
Trigger at label="DocBack-out-E"
Silent=1
<LuaCode>
	if (DocMoore_exam) then
		set_rush_tux(0, "DocMoore")
		DocMoore_exam = false
	end
</LuaCode>
* End of trigger *

##############
## Level  1 ##
############## 
* New event trigger *
Name=_"Exit Warehouse"
Trigger at label="1to8"
Silent=0
<LuaCode> teleport("8from1") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"To Warehouse Level 2"
Trigger at label="1to2"
Silent=0
<LuaCode> teleport("2from1") </LuaCode>
* End of trigger *

##############
## Level  2 ##
##############
* New event trigger *
Name=_"To Warehouse Level 1"
Trigger at label="2to1"
Silent=0
<LuaCode> teleport("1from2") </LuaCode>
* End of trigger *

##############
## Level  3 ##
##############
* New event trigger *
Name=_"Back to Kevin's Garden"
Trigger at label="3to17"
Silent=0
<LuaCode> teleport("17from3") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"To Energy Station"
Trigger at label="3to18"
Silent=0
<LuaCode> teleport("18from3") </LuaCode>
* End of trigger *

##############
## Level  4 ##
##############
* New event trigger *
Name=_"Back to Lower Catacombs"
Trigger at label="4to56"
Silent=0
<LuaCode> teleport("56fromX1") </LuaCode>
* End of trigger *

##############
## Level  5 ##
##############
* New event trigger *
Name=_"Way to Disruptor Machine Deck"
Trigger at label="5to55"
Silent=0
<LuaCode> teleport("55fromX0") </LuaCode>
* End of trigger *

##############
## Level  6 ##
##############
* New event trigger *
Name=_"Back to Town"
Trigger at label="6to0"
Silent=0
<LuaCode> teleport("0from6") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"To Old Server Room"
Trigger at label="6to58"
Silent=0
<LuaCode> teleport("58from6") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"Singularity Attacked"
Trigger on enemy death in level=6
Enemy faction="singularity"
<LuaCode> 
	set_faction_state("singularity", "hostile") 
	change_obstacle_state("Sin-gun", "enabled")
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Singularity Death"
Trigger on enemy death in level=6
Enemy dialog name="Singularity"
<LuaCode>
	if (has_quest("The yellow toolkit") and not done_quest("The yellow toolkit")) then
		add_diary_entry(_"The yellow toolkit", _"The main Singularity bot is dead. The rest are now attacking me! Maybe I should have paid closer attention to it...")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Automated Factory Mechanism"
Trigger at label="AutomatedFactory-Mechanism"
Silent=0
<LuaCode>
	if (has_item_backpack("Elbow Grease Can")) then
		Lvl6_elbow_grease_applied = true
		Bender_elbow_grease = false
		del_item_backpack("Elbow Grease Can", 1)
		display_big_message(_"Elbow grease has been applied to the Automated Factory.")
	end
</LuaCode>
* End of trigger *

##############
## Level  7 ##
##############

##############
## Level  8 ##
##############
* New event trigger *
Name=_"Enter Warehouse"
Trigger at label="8to1"
Silent=0
<LuaCode> teleport("1from8") </LuaCode>
* End of trigger *

##############
## Level  9 ##
##############
* New event trigger *
Name=_"Down into Crystal Caves"
Trigger at label="9to33"
Silent=0
<LuaCode> teleport("33from9") </LuaCode>
* End of trigger *

##############
## Level 10 ##
##############

##############
## Level 11 ##
##############

##############
## Level 12 ##
##############

* New event trigger *
Name=_"InvaderBot-Alive-Check-N"
Trigger at label="InvaderBot-Alive-Check-N"
Silent=1
<LuaCode>
	if (not npc_dead("InvaderBot")) then
		set_rush_tux(1, "InvaderBot")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"InvaderBot-Alive-Check-W"
Trigger at label="InvaderBot-Alive-Check-W"
Silent=1
<LuaCode>
	if (not npc_dead("InvaderBot")) then
		set_rush_tux(1, "InvaderBot")
	end
</LuaCode>
* End of trigger *

##############
## Level 13 ##
##############

* New event trigger *
Name=_"Get me out of here!"
Trigger at label="13to58"
Silent=0
<LuaCode> teleport("58from13") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"296 Teleport Point"
Trigger exiting level=13
<LuaCode>
	if (Ewalds_296_self_sacrifice) and
	   (not done_quest("An Explosive Situation")) and
	   (not Ewalds_296_teleported) then
		teleport_npc("296TeleportTarget", "Ewalds_296")
		Ewalds_296_teleported = true
		add_diary_entry(_"An Explosive Situation", _"I just heard an explosion - Ewald's 296 must have just blown the reactor. Perhaps I should go tell Ewald what happened.")
		cli_says("  ".._"Quest Log Updated.","NO_WAIT")
	end
</LuaCode>
* End of trigger *
##############
## Level 14 ##
##############

##############
## Level 15 ##
##############

##############
## Level 16 ##
##############

##############
## Level 17 ##
##############
* New event trigger *
Name=_"Kevin Guard Rush-1"
Trigger at label="Kevin-Enter-1"
Silent=1
<LuaCode>
	set_rush_tux(1, "KevinGuard")
	change_obstacle_state("KevinsDoor", "closed")
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Kevin Guard Rush-2"
Trigger at label="Kevin-Enter-2"
Silent=1
<LuaCode>
	set_rush_tux(1, "KevinGuard")
	change_obstacle_state("KevinsDoor", "closed")
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Kevin Guard Rush-3"
Trigger at label="Kevin-Enter-3"
Silent=1
<LuaCode>
	set_rush_tux(1, "KevinGuard")
	change_obstacle_state("KevinsDoor", "closed")
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"To Kevin's Underground Station"
Trigger at label="17to3"
Silent=0
<LuaCode> teleport("3from17") </LuaCode>
* End of trigger *

##############
## Level 18 ##
##############
* New event trigger *
Name=_"To Underground Station"
Trigger at label="18to3"
Silent=0
<LuaCode> teleport("3from18") </LuaCode>
* End of trigger *

##############
## Level 19 ##
##############

##############
## Level 20 ##
##############

##############
## Level 21 ##
##############

##############
## Level 22 ##
##############

##############
## Level 23 ##
##############

##############
## Level 24 ##
##############

* New event trigger *
Name=_"24close1"
Trigger at label="24close1"
Silent=1
<LuaCode>
	closelvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24close2"
Trigger at label="24close2"
Silent=1
<LuaCode>
	closelvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24close3"
Trigger at label="24close3"
Silent=1
<LuaCode>
	closelvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24close4"
Trigger at label="24close4"
Silent=1
<LuaCode>
	closelvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24close5"
Trigger at label="24close5"
Silent=1
<LuaCode>
	closelvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24close6"
Trigger at label="24close6"
Silent=1
<LuaCode>
	closelvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24close7"
Trigger at label="24close7"
Silent=1
<LuaCode>
	closelvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24close8"
Trigger at label="24close8"
Silent=1
<LuaCode>
	closelvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24open1"
Trigger at label="24open1"
Silent=1
<LuaCode>
	openlvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24open2"
Trigger at label="24open2"
Silent=1
<LuaCode>
	openlvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24open3"
Trigger at label="24open3"
Silent=1
<LuaCode>
	openlvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24open4"
Trigger at label="24open4"
Silent=1
<LuaCode>
	openlvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24open5"
Trigger at label="24open5"
Silent=1
<LuaCode>
	openlvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24open6"
Trigger at label="24open6"
Silent=1
<LuaCode>
	openlvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24open7"
Trigger at label="24open7"
Silent=1
<LuaCode>
	openlvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24open8"
Trigger at label="24open8"
Silent=1
<LuaCode>
	openlvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24open9"
Trigger at label="24open9"
Silent=1
<LuaCode>
	openlvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24open10"
Trigger at label="24open10"
Silent=1
<LuaCode>
	openlvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24open11"
Trigger at label="24open11"
Silent=1
<LuaCode>
	openlvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24open12"
Trigger at label="24open12"
Silent=1
<LuaCode>
	openlvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24open13"
Trigger at label="24open13"
Silent=1
<LuaCode>
	openlvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24open14"
Trigger at label="24open14"
Silent=1
<LuaCode>
	openlvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24open15"
Trigger at label="24open15"
Silent=1
<LuaCode>
	openlvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24open16"
Trigger at label="24open16"
Silent=1
<LuaCode>
	openlvl24doors()
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24inside"
Trigger at label="24inside"
Silent=1
<LuaCode>
	hurt_tux(50)
	display_big_message(_"It's a trap!")
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24wallrm1"
Trigger at label="24wallrm1"
Silent=1
<LuaCode>
	if (not wall24_1) then
		del_obstacle("24wall1")
		wall24_1 = true
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24wallrm2"
Trigger at label="24wallrm2"
Silent=1
<LuaCode>
	if (not wall24_2) then
		del_obstacle("24wall2")
		wall24_2 = true
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24wallrm3"
Trigger at label="24wallrm3"
Silent=1
<LuaCode>
	if (not wall24_3) then
		del_obstacle("24wall3")
		wall24_3 = true
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24wallrm4"
Trigger at label="24wallrm4"
Silent=1
<LuaCode>
	if (not wall24_4) then
		del_obstacle("24wall4")
		wall24_4 = true
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"24randobstacle"
Trigger at label="24randobstacle"
Silent=1
<LuaCode>
	local var = math.random(0,462)
	display_big_message(var)
	change_obstacle_type("24randobst", var)
</LuaCode>
* End of trigger *

##############
## Level 25 ##
##############
* New event trigger *
Name=_"Hatch with broken ladder"
Trigger at label="25to43"
Silent=0
<LuaCode> teleport("43fromX0") </LuaCode>
* End of trigger *

##############
## Level 26 ##
##############

##############
## Level 27 ##
##############

##############
## Level 28 ##
##############
* New event trigger *
Name=_"From32to28"
Trigger at label="28to32"
Silent=1
<LuaCode>
	if (not John_puzzle_locked) and
	   (not John_puzzle_solved) and
	   (John_puzzle_started) then
		teleport("32from28")
		set_rush_tux(1, "John")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"From28to28"
Trigger at label="28to28"
Silent=1
<LuaCode>
	if (not John_puzzle_locked) and
	   (not John_puzzle_solved) and
	   (John_puzzle_started) then
		if (not John_lvl28to28_teleported2) then
			teleport("28from32")
			set_rush_tux(1, "John")
			if (John_lvl28to28_teleported) then
				John_lvl28to28_teleported2 = true
			end
		John_lvl28to28_teleported = true
		end
	end
</LuaCode>
* End of trigger *

##############
## Level 29 ##
##############
* New event trigger *
Name=_"Respawn Novice Arena"
Trigger entering level=29
<LuaCode> respawn_level(29) </LuaCode>
* End of trigger *

* New event trigger *
Name=_"Exit Novice Arena"
Trigger at label="29to0"
Silent=0
<LuaCode> teleport("0from29") </LuaCode>
* End of trigger *

##############
## Level 30 ##
##############
* New event trigger *
Name=_"Respawn Master Arena"
Trigger entering level=30
<LuaCode> respawn_level(30) </LuaCode>
* End of trigger *

* New event trigger *
Name=_"Exit Master Arena"
Trigger at label="30to0"
Silent=0
<LuaCode> teleport("0from30") </LuaCode>
* End of trigger *

##############
## Level 31 ##
##############
* New event trigger *
Name=_"Back to tunnel"
Trigger at label="31to69"
Silent=1
<LuaCode> teleport("69from31") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"HF-gate-check1"
Trigger at label="HF-gate-check1"
Silent=1
<LuaCode>
	if ((cmp_obstacle_state("HF-Gate-inner", "opened")) and
		(cmp_obstacle_state("HF-Gate-outer", "opened")) and
		(has_quest("Open Sesame")) and
		(not done_quest("Open Sesame"))) then
			complete_quest("Open Sesame", "I found the gates. The firmware server should lay beyond them.")
	end

</LuaCode>
* End of trigger *

* New event trigger *
Name=_"HF-gate-check2"
Trigger at label="HF-gate-check2"
Silent=1
<LuaCode>
	if ((cmp_obstacle_state("HF-Gate-inner", "opened")) and
		(cmp_obstacle_state("HF-Gate-outer", "opened")) and
		(has_quest("Open Sesame")) and
		(not done_quest("Open Sesame"))) then
			complete_quest("Open Sesame", "I found the gates. The firmware server should lay beyond them.")
	end
</LuaCode>

Name=_"MSO-BreakingGlassWallTrap"
Trigger at label="MSO-BreakingGlassWallTrapTrigger"
Silent=1
<LuaCode>
	change_obstacle_state("GlassWallLaserTrap01", "enabled")
	change_obstacle_state("GlassWallLaserTrap02", "enabled")
	change_obstacle_state("GlassWallLaserTrap03", "enabled")
	change_obstacle_state("GlassWallLaserTrap04", "enabled")
	change_obstacle_state("GlassWallLaserTrap05", "enabled")
	change_obstacle_state("BreakingGlassWallOnTrap01", "broken")
	change_obstacle_state("BreakingGlassWallOnTrap02", "broken")
	change_obstacle_state("BreakingGlassWallOnTrap03", "broken")
	change_obstacle_state("BreakingGlassWallOnTrap04", "broken")
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"MSO-SwitchOffGlassWallLaserTrap"
Trigger at label="MSO-SwitchOffGlassWallLaserTrap"
Silent=1
<LuaCode>
	change_obstacle_state("GlassWallLaserTrap01", "disabled")
	change_obstacle_state("GlassWallLaserTrap02", "disabled")
	change_obstacle_state("GlassWallLaserTrap03", "disabled")
	change_obstacle_state("GlassWallLaserTrap04", "disabled")
	change_obstacle_state("GlassWallLaserTrap05", "disabled")
</LuaCode>
* End of trigger *


 * New event trigger *
Name=_"IntruderDetectorMSOLobby01"
Trigger at label="IntruderDetectorMSOLobby01"
Silent=1
<LuaCode>
	change_obstacle_state("MSLaserTrapLVL31-1", "enabled")
	change_obstacle_state("MSLaserTrapLVL31-2", "enabled")
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"IntruderDetectorMSOLobby02"
Trigger at label="IntruderDetectorMSOLobby02"
Silent=1
<LuaCode>
	change_obstacle_state("MSLaserTrapLVL31-1", "enabled")
	change_obstacle_state("MSLaserTrapLVL31-2", "enabled")
</LuaCode>

* New event trigger *
Name=_"MSO-SwitchOffLaserTrapMSOLobby-1"
Trigger at label="SwitchOffLaserTrapMSOLobby-1"
Silent=1
<LuaCode>
	change_obstacle_state("MSLaserTrapLVL31-1", "disabled")
	change_obstacle_state("MSLaserTrapLVL31-2", "disabled")
</LuaCode>

* New event trigger *
Name=_"MSO-SwitchOffLaserTrapMSOLobby-2"
Trigger at label="SwitchOffLaserTrapMSOLobby-2"
Silent=1
<LuaCode>
	change_obstacle_state("MSLaserTrapLVL31-1", "disabled")
	change_obstacle_state("MSLaserTrapLVL31-2", "disabled")
</LuaCode>
* End of trigger *
##############
## Level 32 ##
##############
* New event trigger *
Name=_"Falseteleporter1"
Trigger at label="32to28falseA"
Silent=1
<LuaCode>
	teleport("28from32")
	JohnPuzzlefalseA = JohnPuzzlefalseA + 1
	set_rush_tux(1, "John")
	set_bot_destination("JohnLockedLabel", "John")
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Falseteleporter2"
Trigger at label="32to28falseB"
Silent=1
<LuaCode>
	teleport("28from32")
	JohnPuzzlefalseB = JohnPuzzlefalseB + 1
	set_rush_tux(1, "John")
	set_bot_destination("JohnLockedLabel", "John")
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Falseteleporter3"
Trigger at label="32to28falseC"
Silent=1
<LuaCode>
	teleport("28from32")
	JohnPuzzlefalseC = JohnPuzzlefalseC + 1
	set_rush_tux(1, "John")
	set_bot_destination("JohnLockedLabel", "John")
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"32to38riddlesolved"
Trigger at label="32to28trueD"
Silent=1
<LuaCode>
	teleport("28from32success")
	John_puzzle_solved = true
	set_rush_tux(1, "John")
	set_bot_destination("JohnLockedLabel", "John")
</LuaCode>
* End of trigger *

##############
## Level 33 ##
##############
* New event trigger *
Name=_"Exit Crystal Caves"
Trigger at label="33to9"
Silent=0
<LuaCode> teleport("9from33") </LuaCode>
* End of trigger *

##############
## Level 34 ##
##############
* New event trigger *
Name=_"Back to the Desert"
Trigger at label="34to38"
Silent=0
<LuaCode>
	if (Tania_surface) and
	   (not done_quest("Tania's Escape")) and
	   (Tania_follow_tux) and
	   (not Tania_stopped_by_Pendragon) then
		teleport_npc("38to34", "Tania")
	end
	teleport("38from34");
</LuaCode>
* End of trigger *

##############
## Level 35 ##
##############
* New event trigger *
Name=_"Back to the Desert"
Trigger at label="SADD-NoExit"
Silent=1
<LuaCode>
	if (done_quest("SADD's power supply")) and
	   (not SADD_trick) then
		SADD_trick = true
		change_obstacle_state("SADDGun1", "enabled")
		change_obstacle_state("SADDGun2", "enabled")
		change_obstacle_state("BreakableWall2", "broken")
		start_chat("SADD")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Back to the Desert"
Trigger at label="35to40"
Silent=0
<LuaCode>
	if (has_quest("Tania's Escape")) and
	   (not done_quest("Tania's Escape")) and
	   (SACD_gunsoff) and
	   (Tania_follow_tux) and
	   (not Tania_surface) then
		Tania_surface = true
		teleport_npc("40from35", "Tania")
		change_obstacle_state("DesertGate-Inner", "closed")
		add_diary_entry(_"Tania's Escape", _"Tania has made it to the surface for the first time in a very long time.")
	end
	teleport("40from35")
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"To the Secret Area Service Tunnels"
Trigger at label="35to36-North"
Silent=0
<LuaCode> teleport("36from35-North") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"To the Secret Area Service Tunnels"
Trigger at label="35to36-South"
Silent=0
<LuaCode> teleport("36from35-South") </LuaCode>
* End of trigger *

##############
## Level 36 ##
##############
* New event trigger *
Name=_"Back to the Secret Area"
Trigger at label="36to35-North"
Silent=0
<LuaCode> teleport("35from36-North") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"Back to the Secret Area"
Trigger at label="36to35-South"
Silent=0
<LuaCode> teleport("35from36-South") </LuaCode>
* End of trigger *

##############
## Level 37 ##
##############
* New event trigger *
Name=_"Red Square"
Trigger at label="tutmove-1"
Silent=1
<LuaCode>
	if (TutorialTom_learn_to_walk) and
	   (has_quest("Tutorial Movement")) and
	   (not TutorialTom_move_red) then
		TutorialTom_move_red = true
		add_diary_entry("Tutorial Movement",_"Good, now move to the black grating to the East.")
		display_big_message(_"Quest log updated")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"Black Dot"
Trigger at label="tutmove-2"
<LuaCode>
	if (has_quest("Tutorial Movement")) and
	   (TutorialTom_move_red) and
	   (not TutorialTom_move_black) then
		TutorialTom_move_black = true
		add_diary_entry("Tutorial Movement",_"Good, now talk to Tutorial Tom again.")
		display_big_message(_"Quest log updated")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"PastWall-N"
Trigger at label="Tutorial-PastWall1"
Silent=1
<LuaCode>
	if (not TutorialTom_Tux_PastWall) then
		TutorialTom_Tux_PastWall = true
		set_bot_destination("Tutorial-PastWall1", "TutorialTom")
	end
</LuaCode>
* End of trigger *

* New event trigger *
Name=_"PastWall-S"
Trigger at label="Tutorial-PastWall2"
Silent=1
<LuaCode>
	if (not TutorialTom_Tux_PastWall) then
		TutorialTom_Tux_PastWall = true
		set_bot_destination("Tutorial-PastWall1", "TutorialTom")
	end
</LuaCode>
* End of trigger *
##############
## Level 38 ##
##############
* New event trigger *
Name=_"To a Forgotten Bunker"
Trigger at label="38to34"
Silent=0
<LuaCode>
	if (Tania_surface) and
	   (not done_quest("Tania's Escape")) and
	   (not Tania_stopped_by_Pendragon) then
		teleport_npc("34to38", "Tania")
	end
	teleport("34from38")
</LuaCode>
* End of trigger *

##############
## Level 39 ##
##############

##############
## Level 40 ##
##############
* New event trigger *
Name=_"Unknown place"
Trigger at label="40to35"
Silent=0
<LuaCode> teleport("35from40") </LuaCode>
* End of trigger *

##############
## Level 41 ##
##############

##############
## Level 42 ##
##############

##############
## Level 43 ##
##############
* New event trigger *
Name=_"Hidden way out"
Trigger at label="43toX1"
Silent=0
<LuaCode> teleport("25from43") </LuaCode>
* End of trigger *

##############
## Level 44 ##
##############

##############
## Level 45 ##
##############

##############
## Level 46 ##
##############

##############
## Level 47 ##
##############

##############
## Level 48 ##
##############

##############
## Level 49 ##
##############

##############
## Level 50 ##
##############

##############
## Level 51 ##
##############

##############
## Level 52 ##
##############

##############
## Level 53 ##
##############

##############
## Level 54 ##
##############

##############
## Level 55 ##
##############
* New event trigger *
Name=_"Back to Disruptor Shield Control"
Trigger at label="55toX0"
Silent=0
<LuaCode> teleport("5from55") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"To Machine Deck Lower Catacombs"
Trigger at label="55toX1"
Silent=0
<LuaCode> teleport("56fromX0") </LuaCode>
* End of trigger *

##############
## Level 56 ##
##############
* New event trigger *
Name=_"Back to Machine Deck Upper Catacombs"
Trigger at label="56toX0"
Silent=0
<LuaCode> teleport("55fromX1") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"To Disruptor Machine Deck"
Trigger at label="56toX1"
Silent=0
<LuaCode> teleport("4from56") </LuaCode>
* End of trigger *

##############
## Level 57 ##
##############

##############
## Level 58 ##
##############
* New event trigger *
Name=_"Back To Maintenance Tunnel"
Trigger at label="58to6"
Silent=0
<LuaCode> teleport("6from58") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"We need to go deeper..."
Trigger at label="58to13"
Silent=0
<LuaCode> teleport("13from58") </LuaCode>
* End of trigger *

##############
## Level 59 ##
##############
* New event trigger *
Name=_"Back to tunnel"
Trigger at label="59to60ctrlroom"
Silent=1
<LuaCode> teleport("60from59ctrlroom") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"To tunnel..."
Trigger at label="59to60botroom"
Silent=1
<LuaCode> teleport("60from59botroom") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"Back to tunnel"
Trigger at label="59to60house"
Silent=1
<LuaCode> teleport("60from59house") </LuaCode>
* End of trigger *
##############
## Level 60 ##
##############

* New event trigger *
Name=_"Back to tunnel"
Trigger at label="60to59ctrlroom"
Silent=1
<LuaCode> teleport("59from60ctrlroom") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"To tunnel..."
Trigger at label="60to59botroom"
Silent=1
<LuaCode> teleport("59from60botroom") </LuaCode>
* End of trigger *

* New event trigger *
Name=_"Back to tunnel"
Trigger at label="60to59house"
Silent=1
<LuaCode> teleport("59from60house") </LuaCode>
* End of trigger *

##############
## Level 61 ##
##############

##############
## Level 62 ##
##############

##############
## Level 63 ##
##############

##############
## Level 64 ##
##############

##############
## Level 65 ##
##############

##############
## Level 66 ##
##############

##############
## Level 67 ##
##############

##############
## Level 68 ##
##############

##############
## Level 69 ##
##############
* New event trigger *
Name=_"Back to tunnel"
Trigger at label="69to31"
Silent=1
<LuaCode> teleport("31from69") </LuaCode>
* End of trigger *

** End of Mission Event Section **
*** End of Mission File ***
(leave the above termination text in the file or we might get a segfault/corrupt file termination)
*** END OF EVENT ACTION AND EVENT TRIGGER FILE *** LEAVE THIS TERMINATOR IN HERE ***

